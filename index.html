<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advance Portfolio - Single File</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;700&display=swap" rel="stylesheet">

    <style>
        /* ============== CSS STYLES ============== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #0d0d1a; /* Dark space background */
            color: #ffffff;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
        }

        /* The 3D canvas stays fixed in the background */
        .webgl {
            position: fixed;
            top: 0;
            left: 0;
            outline: none;
            z-index: -1; /* Puts it behind the content */
        }

        /* Styles for the text content */
        .content {
            position: relative;
            padding: 0 5%;
        }

        .section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Each section takes full screen height */
            text-align: center;
        }

        .hero h1 {
            font-size: 5rem;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.5rem;
            font-weight: 300;
        }

        h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <canvas class="webgl"></canvas>

    <main class="content">
        <section class="section hero">
            <h1>Digital Universe</h1>
            <p>Crafting immersive web experiences.</p>
        </section>
        <section class="section">
            <h2>About Me</h2>
            <p>I build beautiful and interactive things for the web.</p>
        </section>
        <section class="section">
            <h2>My Projects</h2>
            <p>Here's a selection of my recent work.</p>
        </section>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

    <script>
        // ============== JAVASCRIPT CODE ==============

        // ============== THREE.JS SETUP ==============
        // Scene
        const scene = new THREE.Scene();

        // Canvas
        const canvas = document.querySelector('canvas.webgl');

        // Sizes
        const sizes = {
            width: window.innerWidth,
            height: window.innerHeight
        };

        // Camera
        const camera = new THREE.PerspectiveCamera(75, sizes.width / sizes.height, 0.1, 100);
        camera.position.z = 3;
        scene.add(camera);

        // Renderer
        const renderer = new THREE.WebGLRenderer({
            canvas: canvas,
            alpha: true // Makes the canvas background transparent
        });
        renderer.setSize(sizes.width, sizes.height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // ============== 3D OBJECTS (PARTICLES) ==============
        // Create a galaxy of particles
        const particlesGeometry = new THREE.BufferGeometry();
        const count = 5000; // Number of particles

        const positions = new Float32Array(count * 3); // Each particle has x, y, z

        for (let i = 0; i < count * 3; i++) {
            positions[i] = (Math.random() - 0.5) * 10; // Random positions in a 10x10x10 cube
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.02,
            sizeAttenuation: true, // Makes distant particles smaller
            color: 0xffffff
        });

        const particles = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particles);

        // ============== ANIMATIONS ==============
        // Animate particles on mouse move
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (event) => {
            mouseX = event.clientX;
            mouseY = event.clientY;
        });

        // Animate based on scroll
        let scrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            scrollY = window.scrollY;
        });

        // Main animation loop
        const clock = new THREE.Clock();
        const tick = () => {
            const elapsedTime = clock.getElapsedTime();

            // Animate particles based on scroll and time
            particles.rotation.y = elapsedTime * 0.05;
            particles.rotation.x = scrollY * 0.0005; // Rotate on scroll

            // Animate camera based on mouse
            camera.position.x = (mouseX / sizes.width - 0.5) * 2;
            camera.position.y = -(mouseY / sizes.height - 0.5) * 2;
            camera.lookAt(scene.position); // Always look at the center

            // Render the scene
            renderer.render(scene, camera);

            // Call tick again on the next frame
            window.requestAnimationFrame(tick);
        };

        tick(); // Start the animation loop

        // Handle window resize
        window.addEventListener('resize', () => {
            sizes.width = window.innerWidth;
            sizes.height = window.innerHeight;

            camera.aspect = sizes.width / sizes.height;
            camera.updateProjectionMatrix();

            renderer.setSize(sizes.width, sizes.height);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        });

    </script>
</body>
</html>
